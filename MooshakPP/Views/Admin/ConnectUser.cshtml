@model MooshakPP.Models.ViewModels.AddConnectionsViewModel
@{
    ViewBag.Title = "Connect users";
}

<p>@ViewData["error"]</p>

<div class="row">
    <div class="col-md-offset-2 col-md-4">
        <div class="btn-group">
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                @if (Model.currentCourse != null)
                {
                    @Model.currentCourse.name
                }
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
                @foreach(var course in Model.courses)
                {
                    <li>@Html.ActionLink(@course.name, "ConnectUser", "Admin", new { courseid = course.ID }, null)</li>
                }
            </ul>
        </div>
    </div>
    @Html.ActionLink("Back", "Index", "Admin", null, new { @class = "btn btn-primary backbutton" })
</div><br />

<div class="row">
    <div class="col-md-offset-2 col-md-3">
        @using (Html.BeginForm("ConnectUser", "Admin", new { courseid = Model.currentCourse.ID }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
        {
            <div class="userlist">
                <h3>Connected users</h3>
                <table>
                    <tbody>
                        @foreach (var item in Model.connectedUser)
                        {
                            if (item != null)
                            {
                                <tr>
                                    <td><input type="checkbox" name=users id="@item.Id" value="@item.Id" /><label for="@item.Id">@item.Email</label></td>
                                </tr>
                            }
                        }

                    </tbody>
                </table>
            </div>
            <hr />
            <button name="action" value="remove" class="btn btn-default">Remove selected users</button>
        }
    </div>
    <div class="col-md-offset-2 col-md-3">
        @using (Html.BeginForm("ConnectUser", "Admin", new { courseid = Model.currentCourse.ID},FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
        {
            <div class="userlist">
                <h3>All users</h3>
                <table>
                    <tbody>
                        @foreach (var item in Model.notConnectedUser)
                        {
                            if (item != null)
                            {
                                <tr>
                                    <td><input type="checkbox" name=users id="n @item.Id" value="@item.Id" /><label for="n @item.Id">@item.Email</label> </td>
                                </tr>

                            }
                        }
                    </tbody>
                </table>
            </div>
            <hr />
            <button name="action" value="add" class="btn btn-default add">Add users to @Model.currentCourse.name</button>
        }
    </div>
</div><br />

<div class="row">
    <div class="col-md-offset-2 col-md-3">
    </div>
    <div class="col-md-offset-1 col-md-3">
    </div>
</div>